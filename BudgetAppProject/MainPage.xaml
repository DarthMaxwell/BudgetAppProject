<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:micro="clr-namespace:Microcharts.Maui;assembly=Microcharts.Maui"
             xmlns:local="clr-namespace:BudgetAppLibray;assembly=BudgetAppLibray"
    x:Class="BudgetAppProject.MainPage">

    <ScrollView>
        <VerticalStackLayout Margin="20,0" Spacing="25">

            <HorizontalStackLayout>
                <Picker
                    Margin="0,0,10,0"
                    ItemsSource="{Binding Profiles}"
                    ItemDisplayBinding="{Binding Name}"
                    SelectedItem="{Binding SelectedProfile}"
                    x:Name="ProfilePicker"
                    SelectedIndexChanged="ProfilePicker_SelectedIndexChanged"/>

                <Button x:Name="EditButton" Clicked="EditButton_Clicked" Text="Edit"/>
                <Button x:Name="AddButtonProfile" Clicked="AddButtonProfile_Clicked" Text="Add profile"/>
                <!--<ImageButton x:Name="AddButtonProfile" Clicked="AddButtonProfile_Clicked" Source="dotnet_bot.png" Aspect="AspectFit" HeightRequest="30" WidthRequest="60"/>-->
            </HorizontalStackLayout>

            <!--Need to make dynamic-->
            <micro:ChartView x:Name="ExpenseChart"
                         HeightRequest="500"
                         WidthRequest="500"
                         VerticalOptions="Center"
                         HorizontalOptions="Center"/>

            <CollectionView x:Name="DisplayExpenses" ItemsLayout="VerticalList" >
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame>
                            <HorizontalStackLayout Spacing="10">
                                <Label Text="{Binding Name}"/>
                                <Label Text="{Binding Value}"/>
                            </HorizontalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!--These should be hidden until hit the edit button-->
            <Entry x:Name="ProfileNameEntry" IsVisible="False" Text="{Binding SelectedProfile}"/>

            <CollectionView x:Name="Expenses" ItemsLayout="VerticalList" IsVisible="False" ItemsSource="{Binding Expenses}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame>
                            <HorizontalStackLayout>
                                <local:CustomSwitch1 IsToggled="{Binding Type, Converter={local:Text2BoolSwitchConverter}}"/>

                                <Entry Placeholder="Value" Text="{Binding Value}"/>

                                <Entry Placeholder="Name"  Text="{Binding ExpenseName}"/>

                                <Button Text="Delete" Clicked="DeleteButton_Clicked"/>
                            </HorizontalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!--Need a cancle button-->
            <Button x:Name="AddExpenseButton" Text="Add Expense" Clicked="AddExpenseButton_Clicked" IsVisible="False"/>
            <Button x:Name="RemoveProfileButton" Clicked="RemoveProfileButton_Clicked" IsVisible="False" Text="Remove"/>
            <Button x:Name="SaveProfileButton" IsVisible="False" Clicked="SaveProfileButton_Clicked" Text="Save"/>
            <Button x:Name="CancelButton" IsVisible="False" Clicked="CancelButton_Clicked" Text="Cancel"/>
            
            <!--Will need a new profile button for this one-->
            <!--Can change the empty one to new profile and when its saved it needs a name and creates a new one-->
            

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
