<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:BudgetAppLibray;assembly=BudgetAppLibray"
    x:Class="BudgetAppProject.MainPage">

    <ScrollView>
        <VerticalStackLayout
            Padding="30,0"
            Spacing="25">

            <HorizontalStackLayout>
                <Picker
                    HorizontalOptions="FillAndExpand"
                    Margin="0,0,10,0"
                    ItemsSource="{Binding Profiles}"
                    ItemDisplayBinding="{Binding Id}"
                    SelectedItem="{Binding SelectedProfile}"
                    x:Name="ProfilePicker"
                    SelectedIndexChanged="ProfilePicker_SelectedIndexChanged"/>

                <ImageButton x:Name="EditButton" Clicked="EditButton_Clicked" Source="dotnet_bot.png" Aspect="AspectFit" HeightRequest="30" WidthRequest="30"/>
                <ImageButton x:Name="AddButtonProfile" Clicked="AddButtonProfile_Clicked" Source="dotnet_bot.png" Aspect="AspectFit" HeightRequest="30" WidthRequest="60"/>
            </HorizontalStackLayout>

            <HorizontalStackLayout HorizontalOptions="Center">
                <Entry x:Name="IncomeEntry" Placeholder="Income" Unfocused="IncomeEntry_Unfocused" IsEnabled="False"/>
    
                <Picker x:Name="TaxPicker" SelectedIndexChanged="TaxPicker_SelectedIndexChanged" IsEnabled="False"/>
            </HorizontalStackLayout>

            <CollectionView x:Name="DisplayExpenses" ItemsLayout="VerticalList">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame>
                            <HorizontalStackLayout>
                                <Label Text="{Binding Name}"/>
                                <Label Text="{Binding Value}"/>
                            </HorizontalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!--These should be hidden until hit the edit button-->
            <Entry x:Name="ProfileNameEntry" IsVisible="False"/>

            <CollectionView x:Name="Expenses" ItemsLayout="VerticalList" IsVisible="False" ItemsSource="{Binding Expenses}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame>
                            <HorizontalStackLayout>
                                <local:CustomSwitch1 IsToggled="{Binding Type, Converter={local:Text2BoolSwitchConverter}}"/>

                                <Entry Placeholder="Value" Text="{Binding Value}"/>

                                <Entry Placeholder="Name"  Text="{Binding ExpenseName}"/>

                                <Button Text="Delete" Clicked="DeleteButton_Clicked"/>
                            </HorizontalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <Button x:Name="AddExpenseButton" Text="Add Expense" Clicked="AddExpenseButton_Clicked" IsVisible="False"/>
            <Button x:Name="SaveProfileButton" IsVisible="False" Clicked="SaveProfileButton_Clicked" Text="Save"/>
            <Button x:Name="RemoveProfileButton" Clicked="RemoveProfileButton_Clicked" IsVisible="False" Text="Remove"/>

            <!--Will need a new profile button for this one-->
            <!--Can change the empty one to new profile and when its saved it needs a name and creates a new one-->
            

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
